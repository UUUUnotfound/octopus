
// Check gradle version. TODO: refactor.

def reguiredGradleVersionMajor = 2
def requiredGradleVersionMinor = 0
def (gradleVersionMajor, gradleVersionMinor) =
    getGradle().gradleVersion.tokenize('.').collect {it.toInteger()}

if ( gradleVersionMajor < reguiredGradleVersionMajor ||
        (gradleVersionMajor == reguiredGradleVersionMajor &&
        gradleVersionMinor < requiredGradleVersionMinor))
{
    throw new GradleException("Gradle version " +
            "$reguiredGradleVersionMajor.$requiredGradleVersionMinor and higher required.")
}

allprojects {
    apply plugin: 'java'

    repositories {
        mavenCentral()
    }
}

// dependencies{
//	compile group: 'com.tunnelvisionlabs', name: 'antlr4-runtime', version: '4.5.3'
//	compile group: 'commons-cli', name: 'commons-cli', version: '1.2'
//	compile group: 'org.apache.commons', name: 'commons-csv', version: '1.2'
//	compile group: 'org.apache.commons', name: 'commons-lang3', version: '3.4'	
//	compile group: 'org.neo4j', name: 'neo4j', version: '2.1.8'
//	compile group: 'junit', name: 'junit', version: '4.12'
// }

task copyToLib(type: Copy) {
    into "jars"
    from configurations.runtime
}


copyToLib.dependsOn subprojects.build
build.dependsOn subprojects.build
build.dependsOn copyToLib
